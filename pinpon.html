<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mini Ping Pong</title>
  
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background: #111;
      color: white;
      font-family: Arial, sans-serif;
    }

    canvas {
      background: #000;
      border: 3px solid #fff;
      display: none;
    }

    label {
      font-size: 1.2em;
      margin-bottom: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
    <a href="TESTHTML.html">return</a>
  <label>
    <input type="checkbox" id="startGame"> on/off
  </label>

  <canvas id="pong" width="600" height="400"></canvas>

  <script>
  const checkbox = document.getElementById("startGame");
  const canvas = document.getElementById("pong");
  const ctx = canvas.getContext("2d");

  let gameRunning = false;

  const paddleWidth = 10, paddleHeight = 80;
  const player = { x: 10, y: 160, dy: 0 };
  const ai = { x: canvas.width - paddleWidth - 10, y: 160 };
  const ball = { 
    x: canvas.width / 2, 
    y: canvas.height / 2, 
    size: 20,  // tamaÃ±o de la imagen
    dx: 4, 
    dy: 4 
  };

  // ðŸ”¹ Carga la imagen de la pelota
  const ballImg = new Image();
  ballImg.src = "img/af.png"; // AsegÃºrate de que la ruta sea correcta

  function drawRect(x, y, w, h, color) {
    ctx.fillStyle = color;
    ctx.fillRect(x, y, w, h);
  }

  function draw() {
    drawRect(0, 0, canvas.width, canvas.height, "black");
    drawRect(player.x, player.y, paddleWidth, paddleHeight, "white");
    drawRect(ai.x, ai.y, paddleWidth, paddleHeight, "white");

    // ðŸ”¹ Dibuja la imagen de la pelota
    ctx.drawImage(ballImg, ball.x - ball.size/2, ball.y - ball.size/2, ball.size, ball.size);
  }

  function move() {
    player.y += player.dy;
    if (player.y < 0) player.y = 0;
    if (player.y + paddleHeight > canvas.height) player.y = canvas.height - paddleHeight;

    ball.x += ball.dx;
    ball.y += ball.dy;

    if (ball.y + ball.size/2 > canvas.height || ball.y - ball.size/2 < 0)
      ball.dy *= -1;

    if (
      ball.x - ball.size/2 < player.x + paddleWidth &&
      ball.y > player.y &&
      ball.y < player.y + paddleHeight
    ) ball.dx *= -1;

    if (
      ball.x + ball.size/2 > ai.x &&
      ball.y > ai.y &&
      ball.y < ai.y + paddleHeight
    ) ball.dx *= -1;

    ai.y += (ball.y - (ai.y + paddleHeight / 2)) * 0.08;

    if (ball.x < 0 || ball.x > canvas.width) {
      ball.x = canvas.width / 2;
      ball.y = canvas.height / 2;
      ball.dx *= -1;
    }
  }

  function update() {
    if (!gameRunning) return;
    move();
    draw();
    requestAnimationFrame(update);
  }

  document.addEventListener("keydown", e => {
    if (e.key === "ArrowUp") player.dy = -6;
    if (e.key === "ArrowDown") player.dy = 6;
  });
  document.addEventListener("keyup", () => player.dy = 0);

  checkbox.addEventListener("change", () => {
    if (checkbox.checked) {
      canvas.style.display = "block";
      gameRunning = true;
      update();
    } else {
      canvas.style.display = "none";
      gameRunning = false;
    }
  });
</script>

</body>
</html>
